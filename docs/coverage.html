
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>mindnum: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">github.com/yanosea/mindnum/app/application/mindnum/get_mindnum_usecase.go (100.0%)</option>
				
				<option value="file1">github.com/yanosea/mindnum/app/application/mindnum/version_usecase.go (100.0%)</option>
				
				<option value="file2">github.com/yanosea/mindnum/app/domain/mindnum/mindnum_model.go (100.0%)</option>
				
				<option value="file3">github.com/yanosea/mindnum/app/infrastructure/text/repository/mindnum_repository.go (100.0%)</option>
				
				<option value="file4">github.com/yanosea/mindnum/app/presentation/cli/mindnum/command/command.go (100.0%)</option>
				
				<option value="file5">github.com/yanosea/mindnum/app/presentation/cli/mindnum/command/mindnum/get.go (100.0%)</option>
				
				<option value="file6">github.com/yanosea/mindnum/app/presentation/cli/mindnum/command/mindnum/version.go (100.0%)</option>
				
				<option value="file7">github.com/yanosea/mindnum/app/presentation/cli/mindnum/command/root.go (100.0%)</option>
				
				<option value="file8">github.com/yanosea/mindnum/app/presentation/cli/mindnum/formatter/formatter.go (100.0%)</option>
				
				<option value="file9">github.com/yanosea/mindnum/app/presentation/cli/mindnum/formatter/text.go (100.0%)</option>
				
				<option value="file10">github.com/yanosea/mindnum/app/presentation/cli/mindnum/main.go (100.0%)</option>
				
				<option value="file11">github.com/yanosea/mindnum/app/presentation/cli/mindnum/presenter/mindnum_presenter.go (100.0%)</option>
				
				<option value="file12">github.com/yanosea/mindnum/pkg/errors/errors.go (100.0%)</option>
				
				<option value="file13">github.com/yanosea/mindnum/pkg/utility/capture.go (100.0%)</option>
				
				<option value="file14">github.com/yanosea/mindnum/pkg/utility/version_util.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package mindnum

import (
        mindnumDomain "github.com/yanosea/mindnum/app/domain/mindnum"
)

type GetMindnumUseCase struct {
        mindnumRepo mindnumDomain.MindnumRepository
}

func NewGetMindnumUseCase(
        mindnumRepo mindnumDomain.MindnumRepository,
) *GetMindnumUseCase <span class="cov8" title="1">{
        return &amp;GetMindnumUseCase{
                mindnumRepo: mindnumRepo,
        }
}</span>

type GetMindnumUsecaseOutputDto struct {
        MindNumber  int
        Description string
}

func (uc *GetMindnumUseCase) Run(birthday string) (*GetMindnumUsecaseOutputDto, error) <span class="cov8" title="1">{
        mindNumber, err := mindnumDomain.GetMindNumber(birthday)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">mindnum, err := uc.mindnumRepo.FindByNumber(mindNumber)
        if err != nil </span><span class="cov8" title="1">{
                return nil, err
        }</span>

        <span class="cov8" title="1">return &amp;GetMindnumUsecaseOutputDto{
                MindNumber:  mindnum.MindNumber,
                Description: mindnum.Description,
        }, nil</span>
}
</pre>
		
		<pre class="file" id="file1" style="display: none">package mindnum

import ()

type VersionUseCase struct{}

func NewVersionUseCase() *VersionUseCase <span class="cov8" title="1">{
        return &amp;VersionUseCase{}
}</span>

type VersionUsecaseOutputDto struct {
        Version string
}

func (uc *VersionUseCase) Run(version string) *VersionUsecaseOutputDto <span class="cov8" title="1">{
        return &amp;VersionUsecaseOutputDto{
                Version: version,
        }
}</span>
</pre>
		
		<pre class="file" id="file2" style="display: none">package mindnum

import (
        "strconv"
        "strings"
        "time"

        "github.com/yanosea/mindnum/pkg/errors"
)

type Mindnum struct {
        MindNumber  int
        Description string
}

func NewMindnum(mindNumber int, description string) (*Mindnum, error) <span class="cov8" title="1">{
        if mindNumber &lt; 1 || 9 &lt; mindNumber </span><span class="cov8" title="1">{
                return nil, errors.New("mind number out of range")
        }</span>
        <span class="cov8" title="1">return &amp;Mindnum{
                MindNumber:  mindNumber,
                Description: description,
        }, nil</span>
}

func GetMindNumber(birthday string) (int, error) <span class="cov8" title="1">{
        if birthday == "" </span><span class="cov8" title="1">{
                return 0, errors.New("birthday is required")
        }</span>

        <span class="cov8" title="1">if _, err := time.Parse("20060102", birthday); err != nil </span><span class="cov8" title="1">{
                return 0, errors.New("invalid date format")
        }</span>

        <span class="cov8" title="1">var mindNum int
        tmpNum := birthday
        for </span><span class="cov8" title="1">{
                tmpSlice := strings.Split(tmpNum, "")
                for _, v := range tmpSlice </span><span class="cov8" title="1">{
                        n, _ := strconv.Atoi(v)
                        mindNum += int(n)
                }</span>
                <span class="cov8" title="1">if mindNum &lt; 10 </span><span class="cov8" title="1">{
                        break</span>
                } else<span class="cov8" title="1"> {
                        tmpNum = strconv.Itoa(mindNum)
                        mindNum = 0
                }</span>
        }

        <span class="cov8" title="1">return mindNum, nil</span>
}
</pre>
		
		<pre class="file" id="file3" style="display: none">package repository

import (
        mindnumDomain "github.com/yanosea/mindnum/app/domain/mindnum"

        "github.com/yanosea/mindnum/pkg/errors"
)

type mindnumRepository struct{}

func NewMindnumRepository() mindnumDomain.MindnumRepository <span class="cov8" title="1">{
        return &amp;mindnumRepository{}
}</span>

func (r *mindnumRepository) FindByNumber(number int) (*mindnumDomain.Mindnum, error) <span class="cov8" title="1">{
        var description string
        switch number </span>{
        case 1:<span class="cov8" title="1">
                description = DescriptionOne</span>
        case 2:<span class="cov8" title="1">
                description = DescriptionTwo</span>
        case 3:<span class="cov8" title="1">
                description = DescriptionThree</span>
        case 4:<span class="cov8" title="1">
                description = DescriptionFour</span>
        case 5:<span class="cov8" title="1">
                description = DescriptionFive</span>
        case 6:<span class="cov8" title="1">
                description = DescriptionSix</span>
        case 7:<span class="cov8" title="1">
                description = DescriptionSeven</span>
        case 8:<span class="cov8" title="1">
                description = DescriptionEight</span>
        case 9:<span class="cov8" title="1">
                description = DescriptionNine</span>
        default:<span class="cov8" title="1">
                return nil, errors.New("number out of range")</span>
        }

        <span class="cov8" title="1">return mindnumDomain.NewMindnum(number, description)</span>
}
</pre>
		
		<pre class="file" id="file4" style="display: none">package command

import (
        "os"

        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/formatter"
        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/presenter"

        "github.com/yanosea/mindnum/pkg/proxy"
)

type Cli struct {
        Cobra       proxy.Cobra
        Version     string
        RootCommand proxy.Command
}

var (
        output string
        format = "text"
)

func NewCli(
        cobra proxy.Cobra,
        version string,
) *Cli <span class="cov8" title="1">{
        rootCommand := NewRootCommand(cobra, version, &amp;format, &amp;output)
        return &amp;Cli{
                Cobra:       cobra,
                Version:     version,
                RootCommand: rootCommand,
        }
}</span>

func (c *Cli) Run() int <span class="cov8" title="1">{
        out := os.Stdout
        exitCode := 0

        if err := c.RootCommand.Execute(); err != nil </span><span class="cov8" title="1">{
                output = formatter.AppendErrorToOutput(err, output)
                out = os.Stderr
                exitCode = 1
        }</span>

        <span class="cov8" title="1">presenter.Present(out, output)

        return exitCode</span>
}
</pre>
		
		<pre class="file" id="file5" style="display: none">package mindnum

import (
        c "github.com/spf13/cobra"

        mindnumApp "github.com/yanosea/mindnum/app/application/mindnum"
        mindnumRepo "github.com/yanosea/mindnum/app/infrastructure/text/repository"
        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/formatter"

        "github.com/yanosea/mindnum/pkg/proxy"
)

var (
        birthday string
)

func NewGetCommand(
        cobra proxy.Cobra,
        format *string,
        output *string,
) proxy.Command <span class="cov8" title="1">{
        cmd := cobra.NewCommand()
        cmd.SetSilenceErrors(true)
        cmd.SetUse("get [birthday (optional)]")
        cmd.SetUsageTemplate(getUsageTemplate)
        cmd.SetHelpTemplate(getHelpTemplate)
        cmd.PersistentFlags().StringVarP(
                &amp;birthday,
                "birthday",
                "b",
                "",
                "Birthday in the format 'yyyyMMdd' (e.g. 20000101) (optional)",
        )
        cmd.SetRunE(
                func(_ *c.Command, args []string) error </span><span class="cov8" title="1">{
                        return runGet(&amp;birthday, format, output, args)
                }</span>,
        )

        <span class="cov8" title="1">return cmd</span>
}

func runGet(birthday *string, format *string, output *string, args []string) error <span class="cov8" title="1">{
        if len(args) &gt; 0 </span><span class="cov8" title="1">{
                *birthday = args[0]
        }</span>

        <span class="cov8" title="1">mindnumRepo := mindnumRepo.NewMindnumRepository()
        uc := mindnumApp.NewGetMindnumUseCase(mindnumRepo)
        dto, err := uc.Run(*birthday)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">f, err := formatter.NewFormatter(*format)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">o := f.Format(dto)

        *output = o

        return nil</span>
}

const (
        getHelpTemplate = `üß† Get a mind number from an argument or the birthday flag and show the personality description

` + getUsageTemplate
        getUsageTemplate = `Usage:
  mindnum get [birthday (optional)] [flags]

Flags:
  -b, --birthday string  üéÇ birthday in the format 'yyyyMMdd' (e.g. 19900719) (optional)
  -h, --help             ü§ù help for mindnum get

Arguments:
  birthday  üéÇ birthday in the format 'yyyyMMdd' (e.g. 19900719) (optional)
`
)
</pre>
		
		<pre class="file" id="file6" style="display: none">package mindnum

import (
        c "github.com/spf13/cobra"

        mindnumApp "github.com/yanosea/mindnum/app/application/mindnum"
        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/formatter"

        "github.com/yanosea/mindnum/pkg/proxy"
)

func NewVersionCommand(
        cobra proxy.Cobra,
        version string,
        format *string,
        output *string,
) proxy.Command <span class="cov8" title="1">{
        cmd := cobra.NewCommand()
        cmd.SetSilenceErrors(true)
        cmd.SetUse("version")
        cmd.SetUsageTemplate(versionUsageTemplate)
        cmd.SetHelpTemplate(versionHelpTemplate)
        cmd.SetArgs(cobra.ExactArgs(0))
        cmd.SetRunE(
                func(_ *c.Command, _ []string) error </span><span class="cov8" title="1">{
                        return runVersion(version, format, output)
                }</span>,
        )

        <span class="cov8" title="1">return cmd</span>
}

func runVersion(version string, format *string, output *string) error <span class="cov8" title="1">{
        uc := mindnumApp.NewVersionUseCase()
        dto := uc.Run(version)

        f, err := formatter.NewFormatter(*format)
        if err != nil </span><span class="cov8" title="1">{
                return err
        }</span>

        <span class="cov8" title="1">o := f.Format(dto)

        *output = o

        return nil</span>
}

const (
        versionHelpTemplate = `üîñ Show the version of mindnum

` + versionUsageTemplate
        versionUsageTemplate = `Usage:
  mindnum version [flags]

Flags:
  -h, --help  ü§ù help for mindnum version
`
)
</pre>
		
		<pre class="file" id="file7" style="display: none">package command

import (
        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/command/mindnum"

        "github.com/yanosea/mindnum/pkg/proxy"
)

func NewRootCommand(
        cobra proxy.Cobra,
        version string,
        format *string,
        output *string,
) proxy.Command <span class="cov8" title="1">{
        cmd := cobra.NewCommand()
        cmd.SetSilenceErrors(true)
        cmd.SetUse("mindnum")
        cmd.SetUsageTemplate(rootUsageTemplate)
        cmd.SetHelpTemplate(rootHelpTemplate)
        cmd.SetVersion(version)
        cmd.AddCommand(
                mindnum.NewVersionCommand(
                        cobra,
                        version,
                        format,
                        output,
                ),
                mindnum.NewGetCommand(
                        cobra,
                        format,
                        output,
                ),
        )

        return cmd
}</span>

const (
        rootHelpTemplate = `üß† mindnum is a CLI tool to get the mind number from the birthday

` + rootUsageTemplate
        rootUsageTemplate = `Usage:
  mindnum [command]

Available Commands:
  get         üß† Get a mind number from an argument or the birthday flag and show the personality description
  help        ü§ù Help about any command
  completion  üîß Generate the autocompletion script for the specified shell
  version     üîñ Show the version of mindnum

Flags:
  -h, --help     ü§ù help for mindnum
  -v, --version  üîñ version for mindnum

Use "mindnum [command] --help" for more information about a command.
`
)
</pre>
		
		<pre class="file" id="file8" style="display: none">package formatter

import (
        "fmt"

        "github.com/yanosea/mindnum/pkg/errors"
)

type Formatter interface {
        Format(result interface{}) string
}

func NewFormatter(
        format string,
) (Formatter, error) <span class="cov8" title="1">{
        var f Formatter
        switch format </span>{
        case "text":<span class="cov8" title="1">
                f = NewTextFormatter()</span>
        default:<span class="cov8" title="1">
                return nil, errors.New("invalid format")</span>
        }
        <span class="cov8" title="1">return f, nil</span>
}

func AppendErrorToOutput(err error, output string) string <span class="cov8" title="1">{
        if err == nil &amp;&amp; output == "" </span><span class="cov8" title="1">{
                return ""
        }</span>

        <span class="cov8" title="1">var result string
        if err != nil </span><span class="cov8" title="1">{
                if output == "" </span><span class="cov8" title="1">{
                        result = fmt.Sprintf("Error : %s", err)
                }</span> else<span class="cov8" title="1"> {
                        result = fmt.Sprintf("Error : %s\n%s", err, output)
                }</span>
        } else<span class="cov8" title="1"> {
                result = output
        }</span>

        <span class="cov8" title="1">if result != "" </span><span class="cov8" title="1">{
                result = Red(result)
        }</span>

        <span class="cov8" title="1">return result</span>
}
</pre>
		
		<pre class="file" id="file9" style="display: none">package formatter

import (
        "fmt"
        "strings"

        mindnumApp "github.com/yanosea/mindnum/app/application/mindnum"
)

type TextFormatter struct{}

func NewTextFormatter() *TextFormatter <span class="cov8" title="1">{
        return &amp;TextFormatter{}
}</span>

func (f *TextFormatter) Format(result interface{}) string <span class="cov8" title="1">{
        var formatted string
        switch v := result.(type) </span>{
        case *mindnumApp.VersionUsecaseOutputDto:<span class="cov8" title="1">
                formatted = fmt.Sprintf("mindnum version %s", v.Version)</span>
        case *mindnumApp.GetMindnumUsecaseOutputDto:<span class="cov8" title="1">
                var builder strings.Builder
                builder.WriteString(fmt.Sprintf("Your mind number is %d!", v.MindNumber))
                if trimmedDescription := strings.TrimSpace(v.Description); trimmedDescription != "" </span><span class="cov8" title="1">{
                        builder.WriteString("\n\n")
                        builder.WriteString(trimmedDescription)
                }</span>
                <span class="cov8" title="1">formatted = builder.String()</span>
        }

        <span class="cov8" title="1">return formatted</span>
}
</pre>
		
		<pre class="file" id="file10" style="display: none">package main

import (
        "os"

        "github.com/yanosea/mindnum/app/presentation/cli/mindnum/command"

        "github.com/yanosea/mindnum/pkg/proxy"
        "github.com/yanosea/mindnum/pkg/utility"
)

var (
        version     = "dev"
        cobra       = proxy.NewCobra()
        versionUtil = utility.NewVersionUtil(proxy.NewDebug())
        exit        = os.Exit
)

func main() <span class="cov8" title="1">{
        cli := command.NewCli(
                cobra,
                versionUtil.GetVersion(version),
        )
        exit(cli.Run())
}</span>
</pre>
		
		<pre class="file" id="file11" style="display: none">package presenter

import (
        "fmt"
        "io"
)

func Present(writer io.Writer, output string) <span class="cov8" title="1">{
        if output != "" </span><span class="cov8" title="1">{
                fmt.Fprintf(writer, "%s\n", output)
        }</span>
}
</pre>
		
		<pre class="file" id="file12" style="display: none">package errors

import "fmt"

type wrappedError struct {
        err error
        msg string
}

func (e *wrappedError) Error() string <span class="cov8" title="1">{
        if e.err == nil &amp;&amp; e.msg == "" </span><span class="cov8" title="1">{
                return ""
        }</span> else<span class="cov8" title="1"> if e.err == nil &amp;&amp; e.msg != "" </span><span class="cov8" title="1">{
                return e.msg
        }</span> else<span class="cov8" title="1"> if e.err != nil &amp;&amp; e.msg == "" </span><span class="cov8" title="1">{
                return e.err.Error()
        }</span> else<span class="cov8" title="1"> {
                return fmt.Sprintf("%s : %v", e.msg, e.err)
        }</span>
}

func New(msg string) error <span class="cov8" title="1">{
        return &amp;wrappedError{msg: msg}
}</span>

func Wrap(err error, msg string) error <span class="cov8" title="1">{
        return &amp;wrappedError{
                err: err,
                msg: msg,
        }
}</span>
</pre>
		
		<pre class="file" id="file13" style="display: none">package utility

import (
        "os"

        "github.com/yanosea/mindnum/pkg/proxy"
)

type Capturable interface {
}

type Capturer struct {
        StdBuffer proxy.Buffer
        ErrBuffer proxy.Buffer
}

func NewCapturer(
        sdtBuffer proxy.Buffer,
        errBuffer proxy.Buffer,
) *Capturer <span class="cov8" title="1">{
        return &amp;Capturer{
                StdBuffer: sdtBuffer,
                ErrBuffer: errBuffer,
        }
}</span>

func (c *Capturer) CaptureOutput(fnc func()) (string, string, error) <span class="cov8" title="1">{
        origStdout := os.Stdout
        origStderr := os.Stderr
        defer func() </span><span class="cov8" title="1">{
                os.Stdout = origStdout
                os.Stderr = origStderr
        }</span>()

        <span class="cov8" title="1">rOut, wOut, _ := os.Pipe()
        rErr, wErr, _ := os.Pipe()
        os.Stdout = wOut
        os.Stderr = wErr

        fnc()

        wOut.Close()
        wErr.Close()

        if _, err := c.StdBuffer.ReadFrom(rOut); err != nil </span><span class="cov8" title="1">{
                return "", "", err
        }</span>

        <span class="cov8" title="1">if _, err := c.ErrBuffer.ReadFrom(rErr); err != nil </span><span class="cov8" title="1">{
                return "", "", err
        }</span>

        <span class="cov8" title="1">stdout := c.StdBuffer.String()
        errout := c.ErrBuffer.String()

        c.StdBuffer.Reset()
        c.ErrBuffer.Reset()

        return stdout, errout, nil</span>
}
</pre>
		
		<pre class="file" id="file14" style="display: none">package utility

import (
        "github.com/yanosea/mindnum/pkg/proxy"
)

type VersionUtil interface {
        GetVersion(version string) string
}

type versionUtil struct {
        Debug proxy.Debug
}

func NewVersionUtil(
        debug proxy.Debug,
) VersionUtil <span class="cov8" title="1">{
        return &amp;versionUtil{
                Debug: debug,
        }
}</span>

func (v *versionUtil) GetVersion(version string) string <span class="cov8" title="1">{
        // if version is embedded, return it
        if version != "" </span><span class="cov8" title="1">{
                return version
        }</span>

        <span class="cov8" title="1">if i, ok := v.Debug.ReadBuildInfo(); !ok </span><span class="cov8" title="1">{
                return "unknown"
        }</span> else<span class="cov8" title="1"> {
                return i.Main.Version
        }</span>
}
</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
